<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>GuimarEyes</title>

  <!-- Bootstrap Core CSS -->
  <link href="asset/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome CSS -->
  <link href="css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- Animate CSS -->
  <link href="css/animate.css" rel="stylesheet">

  <!-- Owl-Carousel -->
  <link rel="stylesheet" href="css/owl.carousel.css">
  <link rel="stylesheet" href="css/owl.theme.css">
  <link rel="stylesheet" href="css/owl.transitions.css">



  <!-- Colors CSS -->
  <link rel="stylesheet" type="text/css" href="css/color/green.css">

  <!-- Custom Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400&family=Oswald:wght@500&display=swap"
    rel="stylesheet">

  <!-- Custom CSS -->
  <link href="css/style.css" rel="stylesheet">
  <link href="css/responsive.css" rel="stylesheet">


  <!-- Modernizer js -->
  <script src="js/modernizr.custom.js"></script>

  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body class="index">


  <!-- Navigation -->
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand page-scroll" href="#page-top"
          style="font-family: 'Orbitron', sans-serif; font-weight: 800; font-size: 24px; color: #5BB12F;">GuimarEyes</a>

      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li class="hidden">
            <a href="#page-top"></a>
          </li>
          <li>
            <a class="page-scroll" href="#services">Serviços</a>
          </li>
          <!-- <li>
                        <a class="page-scroll" href="#latest-news">Tipos de Ocorrências</a>
                    </li> -->
          <li>
            <a class="page-scroll" href="#latest-news">Auditorias e Ocorrências</a>
          </li>
          <li>
            <a class="page-scroll" href="#contact">Relatar Ocorrência</a>
          </li>
          <li>
            <a class="page-scroll" href="#about-us">Contactos</a>
          </li>
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>




  <!--Home Page-->
  <section id="page-top">
    <div id="main-slide" class="carousel slide" data-ride="carousel">
      <!-- Slide com vídeo de fundo -->
      <div class="item active">
        <video class="video-slide" autoplay muted loop playsinline>
          <source src="videos/video.mp4" type="video/mp4">
          O seu navegador não suporta vídeo em HTML5.
        </video>

        <!-- Conteúdo sobreposto -->
        <div class="slider-content">
          <div class="col-md-12 text-center">
            <h1 class="animated1 titulo-slider">
              BEM-VINDOS A <span class="verde-slider">GUIMAREYES</span>
            </h1>
            <p class="animated2 subtitulo-slider">
              Transforme sua mobilidade com<br>um Toque!
            </p>
            <a href="#services" class="page-scroll btn animated1 botao-slider">
              SABER MAIS
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--Home Page-->

  <!--Download Section-->
  <section class="call-to-action">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <h2 class="download-title">MOBILIDADE INTELIGENTE NA PALMA DA SUA MÃO!</h2>
          <p class="download-subtitle">
            ACOMPANHE OS TRANSPORTES PÚBLICOS EM TEMPO REAL E ENCONTRE<br>
            PARAGENS PRÓXIMAS COM FACILIDADE.
          </p>
          <h3 class="download-call">BAIXE AGORA E VIAJE COM MAIS RAPIDEZ E SEGURANÇA!</h3>
          <div class="download-buttons">
            <a href="#" class="store-button">
              <img src="images/logos/app-store-icon.png" alt="App Store" class="store-icon">
              <span>APP STORE</span>
            </a>
            <a href="#" class="store-button">
              <img src="images/logos/google-play-icon.png" alt="Google Play" class="store-icon">
              <span>GOOGLE PLAY</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--Download Section-->


  <!--Serviços Section-->
  <section id="services" class="services-section">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <h3 class="services-title">Serviços</h3>
          <p class="services-description">
            Oferecemos diversas soluções para melhorar a mobilidade urbana e otimizar o transporte público.
            Confira nossos principais serviços da aplicação:
          </p>
        </div>
      </div>

      <div class="row text-center mt-4">
        <div class="col-md-3 service-box central-service">
          <img src="images/Serviços/MonitorizacaoDosTransportes.png" class="img-fluid"
            alt="Monitorização dos Transportes">
          <h4 class="service-title">MONITORIZAÇÃO DOS TRANSPORTES</h4>
          <div class="border-line"></div>
          <p class="service-text">Acompanhe o trajeto, horários e outros detalhes do seu transporte</p>
        </div>

        <div class="col-md-3 service-box">
          <img src="images/Serviços/relatoOcorrencia.webp" class="img-fluid" alt="Relato de Ocorrências">
          <h4 class="service-title">RELATO DE OCORRÊNCIAS</h4>
          <div class="border-line"></div>
          <p class="service-text">Possibilidade de informar problemas nas paragens, veículos ou rotas</p>
        </div>

        <div class="col-md-3 service-box central-service">
          <img src="images/Serviços/paragens.webp" class="img-fluid" alt="Infraestrutura e Paragens">
          <h4 class="service-title">INFRAESTRUTURA E PARAGENS</h4>
          <div class="border-line"></div>
          <p class="service-text">Informações sobre a disponibilidade dos pontos de embarque</p>
        </div>
      </div>

      <div class="row text-center mt-5">
        <div class="col-md-4 service-box bottom-align">
          <img src="images/Serviços/verificarEstado.webp" class="img-fluid" alt="Verificar Estado da Ocorrência">
          <h4 class="service-title">VERIFICAR O ESTADO DA OCORRÊNCIA</h4>
          <div class="border-line"></div>
          <p class="service-text">Verifique se a sua ocorrência submetida está em curso ou se já foi concluída</p>
        </div>

        <div class="col-md-4 service-box top-align">
          <img src="images/Serviços/historico.jpeg" class="img-fluid" alt="Visualizar Histórico de Ocorrências">
          <h4 class="service-title">VISUALIZAR HISTÓRICO DE OCORRÊNCIAS</h4>
          <div class="border-line"></div>
          <p class="service-text">Disponibiliza o histórico de ocorrências submetidas</p>
        </div>
      </div>
    </div>
  </section>
  <!--Serviços Section-->

  <!--Estatisticas Section -->
  <section class="fun-facts">
    <div class="container">
      <div class="row" style="display: flex; justify-content: space-between; margin: 0 auto;">
        <div class="col-xs-12 col-sm-6 col-md-3">
          <div class="counter-item">
            <i class="fa fa-cloud-upload"></i>
            <div class="counter-value" id="item1"
              style="font-size: 36px; font-weight: 700; margin: 15px 0; color: #5BB12F;">0</div>
            <h5>TOTAL DE OCORRÊNCIAS</h5>
          </div>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-3">
          <div class="counter-item">
            <i class="fa fa-check"></i>
            <div class="counter-value" id="item2"
              style="font-size: 36px; font-weight: 700; margin: 15px 0; color: #5BB12F;">0</div>
            <h5>OCORRÊNCIAS RESPONDIDAS</h5>
          </div>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-3">
          <div class="counter-item">
            <i class="fa-solid fa-hourglass-end"></i>
            <div class="counter-value" id="item3"
              style="font-size: 36px; font-weight: 700; margin: 15px 0; color: #5BB12F;">0</div>
            <h5>OCORRÊNCIAS POR RESPONDER</h5>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--Estatisticas Section -->

  <!--Tipos de Ocorrências Section -->
  <div class="about-us-section-2">
    <div class="container text-center">
      <h3 class="titulo-ocorrencias">Tipos de Ocorrências</h3>

      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="ocorrencia-item">
            <div class="icone-ocorrencia">
              <i class="fa fa-clock-o"></i>
            </div>
            <div class="texto-ocorrencia">
              <h5 class="subtitulo-ocorrencia">ATRASOS</h5>
              <p class="descricao-ocorrencia">
                Registe atrasos no transporte para ajudar a melhorar a pontualidade e eficiência do serviço.
              </p>
            </div>
          </div>

          <div class="ocorrencia-item">
            <div class="icone-ocorrencia">
              <i class="fa fa-exclamation-triangle"></i>
            </div>
            <div class="texto-ocorrencia">
              <h5 class="subtitulo-ocorrencia">CONDIÇÕES DAS PARAGENS</h5>
              <p class="descricao-ocorrencia">
                Relate paragens danificadas ou mal sinalizadas para garantir mais segurança e conforto.
              </p>
            </div>
          </div>

          <div class="ocorrencia-item">
            <div class="icone-ocorrencia">
              <i class="fa fa-bus"></i>
            </div>
            <div class="texto-ocorrencia">
              <h5 class="subtitulo-ocorrencia">CONDIÇÕES DOS TRANSPORTES</h5>
              <p class="descricao-ocorrencia">
                Informe problemas nos transportes para melhorar a qualidade e acessibilidade do serviço.
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <img src="images/autocarroEstrada.jpg" alt="Autocarro" class="imagem-ocorrencias">
        </div>
      </div>
    </div>
  </div>
  <!--Tipos de Ocorrências Section-->

  <!--Auditorias e Ocorrências Section-->
  <section id="latest-news" class="latest-news-section">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="section-title text-center">
            <h3 class="auditorias-titulo">Auditorias e Ocorrências</h3>
            <p class="auditorias-desc">
              Acompanhe os relatórios sobre condições do transporte público e paragens. Nesta seção,
              apresentamos auditorias já realizadas ou em desenvolvimento e demonstrar a eficiência dos serviços.
            </p>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="latest-news">

          <!--Auditoria 1-->
          <div class="col-md-12">
            <div class="latest-post">
              <img src="images/vidroPartido.jpg" alt="Vidro Partido" class="post-img">
              <h4><a href="#">VIDRO DE PARAGEM PARTIDO</a></h4>
              <div class="post-details">
                <span class="date"><strong>08</strong><br>Maio, 2023</span>
              </div>
              <p class="post-desc">
                "Passei pela paragem e reparei que o vidro de proteção está completamente partido,
                com pedaços no chão. Além do perigo de cortes, deixa os passageiros expostos ao vento
                e à chuva. Precisa de reparação urgente!"
              </p>
              <div class="btn-wrapper">
                <a href="#" class="btn btn-primary resolvido">RESOLVIDO</a>
              </div>
            </div>
          </div>

          <!--Auditoria 2-->
          <div class="col-md-12">
            <div class="latest-post">
              <img src="images/arvoreCaida.jpg" alt="Árvore caída" class="post-img">
              <h4><a href="#">ÁRVORE CAÍDA NUMA PARAGEM</a></h4>
              <div class="post-details">
                <span class="date"><strong>13</strong><br>Set, 2024</span>
              </div>
              <p class="post-desc">
                "Depois da tempestade, encontrei uma árvore caída sobre a paragem. Está a bloquear
                o acesso aos transportes e a passagem dos peões. É preciso removê-la rapidamente!"
              </p>
              <div class="btn-wrapper">
                <a href="#" class="btn btn-primary resolvido">RESOLVIDO</a>
              </div>
            </div>
          </div>

          <!--Auditoria 3-->
          <div class="col-md-12">
            <div class="latest-post">
              <img src="images/posteSinalizador.webp" alt="Poste sinalizador danificado" class="post-img">
              <h4><a href="#">POSTE SINALIZADOR DANIFICADO</a></h4>
              <div class="post-details">
                <span class="date"><strong>26</strong><br>Fev, 2025</span>
              </div>
              <p class="post-desc">
                "Há um poste sinalizador tombado, parece ter sido atingido por um carro. Está a obstruir
                a passagem e pode cair por completo. Precisa de reparação antes que cause acidentes!"
              </p>
              <div class="btn-wrapper">
                <a href="#" class="btn btn-primary por-resolver">POR RESOLVER</a>
              </div>
            </div>
          </div>

          <!--Auditoria 4-->
          <div class="col-md-12">
            <div class="latest-post">
              <img src="images/sinalDanificado.webp" alt="Sinalização desgastada" class="post-img">
              <h4><a href="#">SINALIZAÇÃO DESGASTADA</a></h4>
              <div class="post-details">
                <span class="date"><strong>19</strong><br>Jan, 2025</span>
              </div>
              <p class="post-desc">
                "As marcações no chão para os autocarros estão quase invisíveis, causando confusão tanto
                para condutores como passageiros. É necessária pintura urgente."
              </p>
              <div class="btn-wrapper">
                <a href="#" class="btn btn-primary por-resolver">POR RESOLVER</a>
              </div>
            </div>
          </div>

          <!--Auditoria 5-->
          <div class="col-md-12">
            <div class="latest-post">
              <img src="images/assentoVandalizado.jpg" alt="Assentos vandalizados" class="post-img">
              <h4><a href="#">ASSENTOS VANDALIZADOS NA PARAGEM</a></h4>
              <div class="post-details">
                <span class="date"><strong>07</strong><br>Out, 2024</span>
              </div>
              <p class="post-desc">
                "Os bancos da paragem estão rasgados e cobertos de graffiti. O espaço está sujo e inutilizável
                para espera. Os passageiros estão a optar por esperar em pé ou fora da cobertura."
              </p>
              <div class="btn-wrapper">
                <a href="#" class="btn btn-primary por-resolver">POR RESOLVER</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>
  <!--Auditorias Realizadas Section -->

  <!--Localização de Ocorrências Section -->
  <section id="latest-news" class="latest-news-section">
    <div class="container">
      <div class="row margin-bottom-50">
        <div class="col-md-12">
          <div class="section-title text-center">
            <h3 class="titulo-localizacao">Veja a localização das ocorrências!</h3>
          </div>
        </div>
      </div>
      <div class="row margin-bottom-50">
        <div id="map"
          style="width: 100%; height: 500px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);"></div>
      </div>
    </div>
  </section>
  <!--Localização de Ocorrências Section -->


  <!--Relatar Ocorrência Section -->
  <section id="contact" class="contact">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="section-title text-center">
            <h3 class="titulo-relatar">Relatar Ocorrência</h3>
            <p class="texto-relatar">
              Ajude a melhorar o transporte público reportando problemas diretamente
              pelo sistema. Aqui é permitido que os clientes informem ocorrências em tempo real,
              garantindo mais segurança e eficiência para todos.
            </p>
          </div>
        </div>
      </div>

      <!--Caixas-->
      <div class="row justify-content-center">
        <div class="col-md-4 d-flex">
          <div class="caixa-ocorrencia w-100">
            <div class="icone-ocorrencia">
              <i class="fa fa-map-marker"></i>
            </div>
            <div class="conteudo-ocorrencia">
              <h5 class="ocorrencia-titulo">ONDE OCORREU</h5>
              <p class="ocorrencia-descricao">Indique com precisão o local onde a situação ocorreu</p>
            </div>
          </div>
        </div>

        <div class="col-md-4 d-flex">
          <div class="caixa-ocorrencia w-100">
            <div class="icone-ocorrencia">
              <i class="fa fa-camera"></i>
            </div>
            <div class="conteudo-ocorrencia">
              <h5 class="ocorrencia-titulo">FOTO OPCIONAL</h5>
              <p class="ocorrencia-descricao">Adicione uma imagem que ajude na identificação da ocorrência (opcional)
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-4 d-flex">
          <div class="caixa-ocorrencia w-100">
            <div class="icone-ocorrencia">
              <i class="fa fa-pencil-alt"></i>
            </div>
            <div class="conteudo-ocorrencia">
              <h5 class="ocorrencia-titulo">TIPO DE OCORRÊNCIA</h5>
              <p class="ocorrencia-descricao">Selecione a categoria que melhor descreve a situação reportada</p>
            </div>
          </div>
        </div>
      </div>

      <!--Botão-->
      <div class="row justify-content-center relatar-btn-wrapper">
        <div class="col-md-12 text-center">
          <button onclick="mostrarFormulario()" class="btn-relatar">Relatar Ocorrência</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Formulário Relatar Ocorrência -->
  <div id="formularioOcorrencia" class="formulario-ocorrencia">
    <div class="formulario-conteudo">
      <div class="formulario-header">
        <h2>Relatar Ocorrência</h2>
        <button type="button" class="btn-fechar" onclick="fecharFormulario()">&times;</button>
      </div>
      <p>Caso queira estar informado do acompanhamento das ocorrências, instale a nossa aplicação e ajude a melhorar os
        nossos serviços.</p>

      <input type="text" id="nome" placeholder="O seu nome*">
      <input type="text" id="foto" placeholder="URL da foto (opcional)">
      <input type="text" id="mensagem" placeholder=" Faça uma pequena descrição*">
      <input type="text" id="linha" placeholder="Linha">
      <input type="text" id="paragem" placeholder="Paragem">

      <select id="tipo">
        <option value="">Tipologia da ocorrência</option>
        <option value="atraso">Atraso</option>
        <option value="paragem">Condições da paragem</option>
        <option value="transporte">Condições do transporte</option>
      </select>

      <button class="btn-enviar" onclick="guardarOcorrencia()">ENVIAR OCORRÊNCIA</button>

      <p class="nota">NOTA: Esta ocorrência será enviada como convidado e não saberá o seu resultado.</p>
    </div>
  </div>
  <!--Relatar Ocorrência Section -->


  <!-- Redes Sociais e Informações -->
  <section class="footer-info">
    <div class="container-fluid">
      <div class="row justify-content-center align-items-stretch">

        <!--REDES SOCIAIS-->
        <div class="col-md-4 d-flex align-items-stretch">
          <div class="section-title text-center w-100 bloco-info">
            <h5 class="bloco-titulo">REDES SOCIAIS</h5>
            <div class="social-grid">
              <a href="#" class="social-item">
                <div class="social-icon"><i class="fab fa-twitter"></i></div> Twitter
              </a>
              <a href="#" class="social-item">
                <div class="social-icon"><i class="fab fa-facebook-f"></i></div> Facebook
              </a>
              <a href="#" class="social-item">
                <div class="social-icon"><i class="fab fa-linkedin-in"></i></div> LinkedIn
              </a>
              <a href="#" class="social-item">
                <div class="social-icon"><i class="fab fa-instagram"></i></div> Instagram
              </a>
            </div>
          </div>
        </div>

        <!--CONTACTOS-->
        <div class="col-md-4 d-flex align-items-stretch">
          <div class="section-title text-center w-100 bloco-info">
            <h5 class="bloco-titulo">CONTACTOS</h5>
            <div class="contacto-lista">
              <div class="contacto-linha">
                <span class="contacto-label">E-mail :</span><span class="contacto-valor">guimareyes@gmail.com</span>
              </div>
              <div class="contacto-linha">
                <span class="contacto-label">Phone :</span><span class="contacto-valor">+351 913 694 245</span>
              </div>
              <div class="contacto-linha">
                <span class="contacto-label">Web :</span><span class="contacto-valor">guimareyes.com</span>
              </div>
            </div>
          </div>
        </div>

        <!--LOCALIZAÇÃO-->
        <div class="col-md-4 d-flex align-items-stretch">
          <div class="section-title text-center w-100 bloco-info">
            <h5 class="bloco-titulo">LOCALIZAÇÃO</h5>
            <div class="localizacao-lista">
              <div class="localizacao-linha">Alameda Dr. Mariano Felgueiras, 10</div>
              <div class="localizacao-linha">4835-075 Guimarães</div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>


  <!-- Rodapé -->
  <footer class="style-1" style="padding: 20px 0; margin-top: 0px;">
    <div class="container">
      <div class="row justify-content-between align-items-center">
        <div class="col-md-4 col-xs-12 text-left">
          <span class="copyright">Copyright &copy; <a href="http://www.patience-is-a-virtue.org/">Mobilidade e
              Transporte</a> 2025</span>
        </div>
        <div class="col-md-4 col-xs-12 text-right" style="float: right;">
          <ul class="footer-link" style="list-style: none; padding: 0; margin: 0;">
            <li style="display: inline; margin-right: 15px;"><a href="#">Privacy Policy</a></li>
            <li style="display: inline;"><a href="#">Terms of Use</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>


  <div id="loader">
    <div class="spinner">
      <div class="dot1"></div>
      <div class="dot2"></div>
    </div>
  </div>

  <!-- jQuery Version 2.1.1 -->
  <script src="js/jquery-2.1.1.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="asset/js/bootstrap.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/classie.js"></script>
  <script src="js/count-to.js"></script>
  <script src="js/jquery.appear.js"></script>
  <script src="js/cbpAnimatedHeader.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.fitvids.js"></script>
  <script src="js/styleswitcher.js"></script>

  <!-- Contact Form JavaScript -->
  <script src="js/jqBootstrapValidation.js"></script>
  <script src="js/contact_me.js"></script>

  <!-- Custom Theme JavaScript -->
  <script src="js/script.js"></script>

  <script src="js/formulario.js"></script>

  <!--API Google -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBwFkQrwmuZCvs8i5e-6FopKzlbi3m7luQ&callback=initMap"
    async defer>
    </script>


  <script>
    const ocorrencias = [
      { lat: 41.4447, lng: -8.2962, titulo: "Vidro partido na paragem" },
      { lat: 41.4461, lng: -8.2980, titulo: "Árvore caída" },
      { lat: 41.4435, lng: -8.2950, titulo: "Sinalização danificada" }
    ];

    function initMap() {
      const centro = { lat: 41.4447, lng: -8.2962 };
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 15,
        center: centro
      });

      ocorrencias.forEach(o => {
        new google.maps.Marker({
          position: { lat: o.lat, lng: o.lng },
          map: map,
          title: o.titulo
        });
      });
    }
  </script>


  <!--Guardar Ocorrência-->
  <script>
    function guardarOcorrencia() {
      const nome = document.getElementById('nome').value;
      const tipo = document.getElementById('tipo').value;
      const mensagem = document.getElementById('mensagem').value;
      const linha = document.getElementById('linha').value;
      const paragem = document.getElementById('paragem').value;
      const fotoInput = document.getElementById('foto').value;
      const data = new Date().toISOString();
      const id = Date.now();

      if (!nome || !tipo || !mensagem) {
        alert('Por favor preencha todos os campos obrigatórios.');
        return;
      }

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;

          // Obter o endereço a partir das coordenadas usando a API de Geocodificação do Google
          const geocoder = new google.maps.Geocoder();
          const latlng = { lat: latitude, lng: longitude };

          geocoder.geocode({ 'location': latlng }, function (results, status) {
            let endereco = '';

            if (status === 'OK') {
              if (results[0]) {
                // Usar o endereço formatado retornado pelo Google
                endereco = results[0].formatted_address;
              }
            } else {
              console.log('Geocoder falhou devido a: ' + status);
            }

            // Criar objeto completo com endereço
            const ocorrencia = {
              id,
              nome,
              email: "N/A",
              tipo,
              mensagem,
              latitude,
              longitude,
              endereco, // Novo campo com o endereço formatado
              data,
              status: "Aberta",
              linha: linha || '',
              paragem: paragem || '',
              foto: fotoInput || ''
            };

            // Guardar localmente com formato correto
            guardarLocalmente(ocorrencia);
          });

        }, function (error) {
          // Em caso de erro na geolocalização
          const ocorrencia = {
            id,
            nome,
            email: "N/A",
            tipo,
            mensagem,
            data,
            status: "Aberta",
            linha: linha || '',
            paragem: paragem || '',
            foto: fotoInput || '',
            endereco: 'Não disponível'
          };

          guardarLocalmente(ocorrencia);
          alert('Não foi possível obter a sua localização, mas a ocorrência foi registrada.');
        });
      } else {
        // Caso o navegador não suporte geolocalização
        const ocorrencia = {
          id,
          nome,
          email: "N/A",
          tipo,
          mensagem,
          data,
          status: "Aberta",
          linha: linha || '',
          paragem: paragem || '',
          foto: fotoInput || '',
          endereco: 'Não disponível'
        };

        guardarLocalmente(ocorrencia);
        alert('Geolocalização não suportada pelo navegador, mas a ocorrência foi registrada.');
      }
    }

    function guardarLocalmente(ocorrencia) {
      // Usar uma chave de armazenamento compatível com o back-office
      let ocorrencias = JSON.parse(localStorage.getItem('ocorrencias')) || [];

      // Verificar se já existe um array de ocorrências ou se é um objeto com propriedade ocorrencias
      if (!Array.isArray(ocorrencias)) {
        // Se for um objeto com a propriedade ocorrencias, use-o
        if (ocorrencias.ocorrencias && Array.isArray(ocorrencias.ocorrencias)) {
          ocorrencias = ocorrencias.ocorrencias;
        } else {
          // Caso contrário, inicie um novo array
          ocorrencias = [];
        }
      }

      ocorrencias.push(ocorrencia);

      // Armazene no formato que o back-office espera: um objeto com propriedade ocorrencias
      localStorage.setItem('ocorrencias', JSON.stringify({ ocorrencias }));

      alert('Ocorrência guardada com sucesso!');
      limparFormulario();
    }

    function limparFormulario() {
      document.getElementById('nome').value = '';
      document.getElementById('tipo').value = '';
      document.getElementById('mensagem').value = '';
      document.getElementById('linha').value = '';
      document.getElementById('paragem').value = '';
      document.getElementById('foto').value = '';
    }

    // Função para calcular as estatísticas sem timer
    function calcularEstatisticas() {
      // Carregar ocorrências
      let dadosOcorrencias = localStorage.getItem('ocorrencias');
      let ocorrencias = [];

      if (dadosOcorrencias) {
        const dados = JSON.parse(dadosOcorrencias);
        if (Array.isArray(dados)) {
          ocorrencias = dados;
        } else if (dados.ocorrencias && Array.isArray(dados.ocorrencias)) {
          ocorrencias = dados.ocorrencias;
        }
      }

      // Carregar auditorias
      let dadosAuditorias = localStorage.getItem('auditorias');
      let auditorias = [];

      if (dadosAuditorias) {
        const dados = JSON.parse(dadosAuditorias);
        if (Array.isArray(dados)) {
          auditorias = dados;
        } else if (dados.auditorias && Array.isArray(dados.auditorias)) {
          auditorias = dados.auditorias;
        }
      }

      // Contagens
      const ocorrenciasAbertas = ocorrencias.filter(o => o.status === "Aberta").length;
      const ocorrenciasRejeitadas = ocorrencias.filter(o => o.status === "Rejeitada").length;
      const auditoriasTotal = auditorias.length;
      const auditoriasResolvidas = auditorias.filter(a => a.status === "Concluída").length;

      // Total = Ocorrências Rejeitadas + Ocorrências Abertas + Auditorias
      const totalOcorrencias = ocorrenciasRejeitadas + ocorrenciasAbertas + auditoriasTotal;

      // Ocorrências Respondidas = Auditorias Concluídas
      const ocorrenciasRespondidas = auditoriasResolvidas;

      // Ocorrências Por Responder = Ocorrências Abertas
      const ocorrenciasPorResponder = ocorrenciasAbertas;

      // Atualizar diretamente o conteúdo HTML dos elementos
      document.getElementById('item1').textContent = totalOcorrencias;
      document.getElementById('item2').textContent = ocorrenciasRespondidas;
      document.getElementById('item3').textContent = ocorrenciasPorResponder;
    }

    // Executar cálculo de estatísticas quando a página carregar
    document.addEventListener('DOMContentLoaded', calcularEstatisticas);
  </script>


</body>

</html>